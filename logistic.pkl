from sklearn.pipeline import Pipeline
from sklearn.compose import ColumnTransformer
from sklearn.preprocessing import OneHotEncoder
from sklearn.linear_model import LogisticRegression
from sklearn.ensemble import RandomForestClassifier
import joblib

# Example: suppose X_train, y_train are your training data
categorical_features = ["Customer Zip", "Shipping Mode", "Category"]
numeric_features = ["Freight Cost", "Weight", "Distance"]

preprocessor = ColumnTransformer(
    transformers=[
        ("cat", OneHotEncoder(handle_unknown='ignore'), categorical_features),
    ],
    remainder='passthrough'
)

# Logistic Regression pipeline
lr_pipeline = Pipeline([
    ("preprocessor", preprocessor),
    ("classifier", LogisticRegression())
])
lr_pipeline.fit(X_train, y_train)

# Random Forest pipeline
rf_pipeline = Pipeline([
    ("preprocessor", preprocessor),
    ("classifier", RandomForestClassifier())
])
rf_pipeline.fit(X_train, y_train)

# Save pipelines
joblib.dump(lr_pipeline, "logistic_model.pkl")
joblib.dump(rf_pipeline, "rf_model.pkl")
